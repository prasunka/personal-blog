---
layout: post
title: "GSoC'20 progress : Phase III"
description: "Work progress during the final phase of Google Summer of Code"
tags: [gsoc, kde]
---

## GSoC 2020 with KDE

Greetings Reader,

And just like that, the third evaluations for **Google Summer of Code** are upon
us. It seems just like yesterday when I began my work on this project and now the
final phase is about to be over. Sort of unbelievable.

Here is the work report for the final phase.

## Work Report

This month was marked with various readjustments in the previous work done based on
the code review from my mentors and finalising the code for the next release:

* #### Changed the type of `bankId` member of class **Record** from unsigned long to `std::string`
That sounds very trivial but it's actually a bit of work. So, the problem originates due to Netherlands'
Bank Identifier Code(BIC) specification. According to the <a href = "https://www.ecb.europa.eu/paym/integration/retail/sepa/iban/shared/pdf/iban_registry.pdf" title="IBAN format registry" rel="noreferrer noopener" target="_blank">IBAN format registry</a> Netherland's BIC has a specification of `4!a` which loosely translates to 4 exactly Uppercase letters.
However, the Record class handled `bankId` using `unsigned long` and all the methods were written with that in mind.
Since, `bankId` is part of the public **API**, it had to be ensured that no dependent client is affected by this change.<br/><br/>
Related Commit:
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/515032ba63016870085770f822a20d94fbd3dbae/" title="Changed bankID type from unsigned long to std::string to accomodate Netherlands records" rel="noreferrer noopener" target="_blank">Changed bankID type from unsigned long to std::string to accomodate Netherlands records</a>

* #### Added methods for validation of `accountId` and `bankId` for Netherlands and Switzerland
Till now, the only checks for these countries were rudimentary length checks which didn't cover the whole
specification. So, two new methods, `method_4ea_10en` and `method_5en_12ec`, were added to **methods.cc**
to handle Dutch and Swiss entries.<br/><br/>
Related Commit:
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/0db94d6a68f182939adb2214c6d32408f5ebdd27/" title="Added methods for validation of Nethelands and Switzerland's entries" rel="noreferrer noopener" target="_blank">Added methods for validation of Nethelands and Switzerland's entries</a>

* #### Added tests for newly added validation methods and for uncovered German return values
Some tests were added to ensure I'm not breaking things with every commit.<br/><br/>
Related Commit:
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/8f95a74db6146d07a1126ee84e803d6521ac6891/" title="Added tests" rel="noreferrer noopener" target="_blank">Added tests</a>

* #### Mark the now redundant and unusable methods of the public API as deprecated and removing members not part of the public API
Due to the shift from the text datafiles to SQLite databases, many of the methods of the public API were now unusable or
made no sense in the new code. To provide compatibility, the method definitions were modified and the methods were themselves
marked `DEPRECATED` using macros. The redundant methods and members which were not public, were removed.<br/><br/>
Related Commits:
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/f8f8e8facc6dd9c77d3fe1369348c883bd4c0916/" title="Deprecated dataValidStartDate() and dataValidEndDate()" rel="noreferrer noopener" target="_blank">Deprecated `dataValidStartDate()` and `dataValidEndDate()`</a>
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/945056da233b2fab3ef758d10148baf0b879666f/" title="Deprecated dataValidStartDate() and dataValidEndDate()" rel="noreferrer noopener" target="_blank">Deprecated `isDataValidForDate()` and `isValidDataAvailable()`</a>
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/36f3c86951e33f61dee245a4f2dedb4b6b4e96f5/" title="Removed dated_files iteration from isValidDataAvailable()" rel="noreferrer noopener" target="_blank">Removed dated_files iteration from `isValidDataAvailable()`</a>
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/ca92093f7544b3282f044075a30644ba10feeb1b/" title="Deprecated closestValidData()" rel="noreferrer noopener" target="_blank">Deprecated `closestValidData()`</a>
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/5adeab9bf93006cb06e367e6a86710ea469e656c/" title="Deprecated loadDataForDate() and getFilenameClosestDateToday() and removed dated_files references" rel="noreferrer noopener" target="_blank">Deprecated `loadDataForDate()` and `getFilenameClosestDateToday()` and removed `dated_files` references</a>
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/c3fb262b40dcbfdbd11ad61f418a22920f6b71fc/" title="Removed dated_file and all related methods" rel="noreferrer noopener" target="_blank">Removed `dated_file` and all related methods</a>

* #### Adding an API for downloading databases from project's website for updating data files
I have added a working prototype for the API. Some work is required on the server side after which I would be able
to enable it for usage. I am working on this on a separate branch `downloadapi-dev`.<br/><br/>
Related Commits:
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/18cabea71bdf654c753246616edaa80bc5443011/" title="Added Class DataUpdater and its definitions" rel="noreferrer noopener" target="_blank">Added Class **DataUpdater** and its definitions</a>
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/92f6c107fa94a3a79b87ab72b0b7b32451401984/" title="Added updater executable" rel="noreferrer noopener" target="_blank">Added updater executable</a>
    * <a href = "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/ci/c813dd7bfa4962b0f77bb6336c7b2b08fafb5165/" title="Added documentation for the updater API" rel="noreferrer noopener" target="_blank">Added documentation for the updater API</a>

So, those were the major work done in this phase. There are a lot of small additions and deletions which are pretty self-
explanatory. You can see them in the <a href= "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/commit_browser" title="commit browser" rel="noreferrer noopener" target="_blank"> commit_browser </a> at my <a href= "https://sourceforge.net/u/prasun/ktoblzcheck-gsoc2020/" title="development fork" rel="noreferrer noopener" target="_blank">development fork</a>.

## The Road Ahead

With this, my journey of **GSoC** takes a rest but in turn begins my wonderful journey of open-source development. Proud to say, I am hooked :)

First of all, I have to get this code merged for the next release so that it sees actual users. Then the APIs need to be worked out and tested with actual databases before release. So, the first few days after **GSoC** are gonna be busy.

From then on, I will be an active contributor to the **KtoBlzCheck** project and explore the other projects of the **KDE community**.
This community has always been supportive and my mentors have enabled me to learn a lot. Thank you all very much.

See you in the next post.

:wave:<br/>
Prasun.